(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},88511,e=>{"use strict";let s=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],88511)},71614,e=>{"use strict";e.i(47167);var s=e.i(43476),a=e.i(71645),t=e.i(18566),r=e.i(67881),d=e.i(70065),i=e.i(23750),l=e.i(10708),n=e.i(94179),c=e.i(62870),o=e.i(31278),h=e.i(7233),u=e.i(46897),m=e.i(88511),x=e.i(27612),p=e.i(94351);let j=(0,e.i(75254).default)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var g=e.i(30374);let y="https://api.elecobuy.com",f=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"];function N(){let e=(0,t.useRouter)(),[N,v]=(0,a.useState)([]),[w,b]=(0,a.useState)(!0),[C,k]=(0,a.useState)(!1),[S,D]=(0,a.useState)(null),[A,T]=(0,a.useState)({type:"home",firstName:"",lastName:"",phone:"",address1:"",address2:"",city:"",state:"",postcode:"",country:"India",isDefault:!1}),[P,L]=(0,a.useState)(!1),[B,F]=(0,a.useState)("");(0,a.useEffect)(()=>{M()},[]);let M=async()=>{try{let s=localStorage.getItem("customerToken");if(!s)return void e.push("/login");let a=await fetch(`${y}/api/addresses`,{headers:{Authorization:`Bearer ${s}`}});if(!a.ok)throw Error("Failed to fetch addresses");let t=await a.json();t.success&&v(t.data)}catch(e){console.error("Error fetching addresses:",e),F(e.message||"Failed to load addresses")}finally{b(!1)}},I=e=>{e?(D(e),T({type:e.type,firstName:e.firstName,lastName:e.lastName,phone:e.phone,address1:e.address1,address2:e.address2||"",city:e.city,state:e.state,postcode:e.postcode,country:e.country,isDefault:e.isDefault})):(D(null),T({type:"home",firstName:"",lastName:"",phone:"",address1:"",address2:"",city:"",state:"",postcode:"",country:"India",isDefault:!1})),k(!0),F("")},E=async s=>{s.preventDefault(),L(!0),F("");try{let s=localStorage.getItem("customerToken");if(!s)return void e.push("/login");let a=S?`${y}/api/addresses/${S._id}`:`${y}/api/addresses`,t=S?"PUT":"POST",r=await fetch(a,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(A)}),d=await r.json();d.success?(k(!1),await M()):F(d.message||"Failed to save address")}catch(e){console.error("Error saving address:",e),F("Network error. Please try again.")}finally{L(!1)}},$=async s=>{if(confirm("Are you sure you want to delete this address?"))try{let a=localStorage.getItem("customerToken");if(!a)return void e.push("/login");let t=await fetch(`${y}/api/addresses/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),r=await t.json();r.success?await M():alert(r.message||"Failed to delete address")}catch(e){console.error("Error deleting address:",e),alert("Network error. Please try again.")}},z=async s=>{try{let a=localStorage.getItem("customerToken");if(!a)return void e.push("/login");let t=await fetch(`${y}/api/addresses/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({isDefault:!0})});(await t.json()).success&&await M()}catch(e){console.error("Error setting default address:",e)}};return w?(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,s.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"My Addresses"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage your delivery addresses"})]}),(0,s.jsxs)(g.Dialog,{open:C,onOpenChange:k,children:[(0,s.jsx)(g.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(r.Button,{onClick:()=>I(),children:[(0,s.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Add New Address"]})}),(0,s.jsxs)(g.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(g.DialogHeader,{children:[(0,s.jsx)(g.DialogTitle,{children:S?"Edit Address":"Add New Address"}),(0,s.jsx)(g.DialogDescription,{children:"Enter your delivery address details"})]}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[B&&(0,s.jsx)("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:(0,s.jsx)("p",{className:"text-sm text-destructive",children:B})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"firstName",children:"First Name *"}),(0,s.jsx)(i.Input,{id:"firstName",value:A.firstName,onChange:e=>T({...A,firstName:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"lastName",children:"Last Name *"}),(0,s.jsx)(i.Input,{id:"lastName",value:A.lastName,onChange:e=>T({...A,lastName:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"phone",children:"Phone Number *"}),(0,s.jsx)(i.Input,{id:"phone",type:"tel",value:A.phone,onChange:e=>T({...A,phone:e.target.value.replace(/\D/g,"").slice(0,10)}),required:!0,maxLength:10})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"address1",children:"Address Line 1 *"}),(0,s.jsx)(i.Input,{id:"address1",value:A.address1,onChange:e=>T({...A,address1:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"address2",children:"Address Line 2"}),(0,s.jsx)(i.Input,{id:"address2",value:A.address2,onChange:e=>T({...A,address2:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"city",children:"City *"}),(0,s.jsx)(i.Input,{id:"city",value:A.city,onChange:e=>T({...A,city:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"state",children:"State *"}),(0,s.jsxs)(c.Select,{value:A.state,onValueChange:e=>T({...A,state:e}),required:!0,children:[(0,s.jsx)(c.SelectTrigger,{id:"state",className:"w-full",children:(0,s.jsx)(c.SelectValue,{placeholder:"Select State"})}),(0,s.jsx)(c.SelectContent,{children:f.map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Label,{htmlFor:"postcode",children:"Postcode *"}),(0,s.jsx)(i.Input,{id:"postcode",value:A.postcode,onChange:e=>T({...A,postcode:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isDefault",checked:A.isDefault,onChange:e=>T({...A,isDefault:e.target.checked}),className:"rounded"}),(0,s.jsx)(l.Label,{htmlFor:"isDefault",className:"cursor-pointer",children:"Set as default address"})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(r.Button,{type:"submit",disabled:P,className:"flex-1",children:P?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):S?"Update Address":"Add Address"}),(0,s.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"})]})]})]})]})]})}),0===N.length?(0,s.jsx)(d.Card,{children:(0,s.jsxs)(d.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(u.MapPin,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No addresses saved yet"}),(0,s.jsxs)(r.Button,{onClick:()=>I(),children:[(0,s.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Add Your First Address"]})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>(0,s.jsxs)(d.Card,{className:e.isDefault?"border-primary":"",children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["home"===e.type?(0,s.jsx)(p.Home,{className:"h-5 w-5 text-muted-foreground"}):(0,s.jsx)(j,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)(d.CardTitle,{className:"text-lg capitalize",children:e.type}),e.isDefault&&(0,s.jsx)(n.Badge,{variant:"default",className:"ml-2",children:"Default"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>I(e),className:"h-8 w-8",children:(0,s.jsx)(m.Edit,{className:"h-4 w-4"})}),(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>$(e._id),className:"h-8 w-8 text-destructive",children:(0,s.jsx)(x.Trash2,{className:"h-4 w-4"})})]})]})}),(0,s.jsxs)(d.CardContent,{children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.phone}),(0,s.jsxs)("p",{className:"text-sm",children:[e.address1,e.address2&&`, ${e.address2}`]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.city,", ",e.state," ",e.postcode]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.country})]}),!e.isDefault&&(0,s.jsx)(r.Button,{variant:"outline",size:"sm",className:"mt-4 w-full",onClick:()=>z(e._id),children:"Set as Default"})]})]},e._id))})]})}e.s(["AddressesContent",()=>N],71614)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>a,"CardTitle",()=>i])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},15788,e=>{"use strict";let t=(0,e.i(75254).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},81947,e=>{"use strict";var t=e.i(43476),s=e.i(25913),r=e.i(47163);let a=(0,s.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(a({variant:s}),e),...i})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}e.s(["Alert",()=>i,"AlertDescription",()=>n])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},97854,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(22016),i=e.i(57688),n=e.i(67881),d=e.i(70065),l=e.i(94179),c=e.i(48425),o="horizontal",u=["horizontal","vertical"],m=s.forwardRef((e,s)=>{var r;let{decorative:a,orientation:i=o,...n}=e,d=(r=i,u.includes(r))?i:o;return(0,t.jsx)(c.Primitive.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...n,ref:s})});m.displayName="Separator";var x=e.i(47163);function h({className:e,orientation:s="horizontal",decorative:r=!0,...a}){return(0,t.jsx)(m,{"data-slot":"separator",decorative:r,orientation:s,className:(0,x.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}var p=e.i(31278),g=e.i(88844),f=e.i(95468),j=e.i(46897),v=e.i(43432),w=e.i(71689),N=e.i(40160),y=e.i(15788),b=e.i(63209),C=e.i(78917),k=e.i(73884),A=e.i(67240),R=e.i(81947),S=e.i(10708),L=e.i(84762),T=e.i(23750),D=e.i(30374);let q="https://api.elecobuy.com";function P({orderId:e}){let c=(0,r.useRouter)(),[o,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[P,O]=(0,s.useState)(""),[$,I]=(0,s.useState)(!1),[B,E]=(0,s.useState)(!1),[_,F]=(0,s.useState)(""),[z,M]=(0,s.useState)([]),[H,U]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let t=localStorage.getItem("customerToken");if(!t)return void c.push("/login");let s=await fetch(`${q}/api/orders/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw Error("Failed to fetch order details");let r=await s.json();r.success?u(r.data):O(r.message||"Order not found")}catch(e){console.error("Error fetching order:",e),O(e.message||"Failed to load order details")}finally{x(!1)}})()},[e,c]);let W=e=>`https://www.dtdc.com/track-your-shipment/?awb=${encodeURIComponent(e)}`,V=e=>e.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),X=e=>{let t,s=(e.status||"").toLowerCase();if("cancelled"===s||s.startsWith("return_"))return s;if("admin_review_required"===s)return"processing";let r=(t=String(e.dtdcTrackingData?.statusText||"").toLowerCase())?t.includes("delivered")||t.includes("delivery completed")?"delivered":t.includes("out for delivery")||t.includes("in transit")||t.includes("dispatched")||t.includes("arrived at")?"shipped":t.includes("packed up")||t.includes("pickup completed")||t.includes("pickup done")?"picked_up":null:null;return r||s};if(m)return(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})});if(P||!o)return(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,t.jsx)("p",{className:"text-destructive mb-4",children:P||"Order not found"}),(0,t.jsx)(a.default,{href:"/dashboard/orders",children:(0,t.jsx)(n.Button,{children:"Back to Orders"})})]})});let G=(e=>{let t=[],s=e.status.toLowerCase(),r=X(e),a=e.paymentStatus?.toLowerCase()==="pending";if("cancelled"===s)return t.push({status:a?"Awaiting Payment":"Order Placed",date:new Date(e.createdAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),completed:!0}),t.push({status:"Cancelled",date:new Date(e.updatedAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),completed:!0,isCancelled:!0}),t;if(e.returnRequest&&e.returnRequest.type){let r=e.returnRequest.type,i="accepted"===r||"return_accepted"===s,n="denied"===r||"return_rejected"===s,d="return_picked_up"===s,l="completed"===e.refundStatus||"completed"===e.returnRequest.refundStatus||"refunded"===e.paymentStatus,c=["pending","confirmed","processing","shipped","delivered"],o=c.indexOf("delivered");return c.forEach((s,r)=>{t.push({status:"pending"===s?a?"Awaiting Payment":"Order Placed":"confirmed"===s?"Order Confirmed":"processing"===s?"Processing":"shipped"===s?"Shipped":"Delivered",date:0===r?new Date(e.createdAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):r===o&&e.deliveredAt?new Date(e.deliveredAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Completed",completed:!0})}),t.push({status:"Return Requested",date:e.returnRequest.requestedAt?new Date(e.returnRequest.requestedAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Pending",completed:!0}),i?(t.push({status:"Return Accepted",date:e.returnRequest.reviewedAt?new Date(e.returnRequest.reviewedAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Pending",completed:!0}),d?(t.push({status:"packed up",date:new Date(e.updatedAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),completed:!0}),l?t.push({status:"Refunded Successfully",date:"Completed",completed:!0}):t.push({status:"Refund Pending",date:"In progress",completed:!1})):t.push({status:"Return Pickup Pending",date:"Pending",completed:!1})):n?t.push({status:"Return Rejected",date:e.returnRequest.reviewedAt?new Date(e.returnRequest.reviewedAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Pending",completed:!0,isRejected:!0}):t.push({status:"Return Under Review",date:"Pending",completed:!1}),t}let i=["pending","confirmed","processing","picked_up","shipped","delivered"],n=Math.max(i.indexOf(r),i.indexOf(s));return i.forEach((r,i)=>{let d=i<=n,l="";l=d?"pending"===r?new Date(e.createdAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"delivered"===r&&"delivered"===s&&e.deliveredAt?new Date(e.deliveredAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):i===n?"In progress":"Completed":"Pending",t.push({status:"pending"===r?a?"Awaiting Payment":"Order Placed":"confirmed"===r?"Order Confirmed":"processing"===r?"Processing":"picked_up"===r?"packed up":"shipped"===r?"Shipped":"Delivered",date:l,completed:d})}),t})(o),Y=new Date(o.createdAt),K=X(o).toLowerCase(),J=o.paymentStatus?.toLowerCase()==="pending",Q=["pending","confirmed","processing"].includes(o.status.toLowerCase())&&!J,Z="shipped"===o.status.toLowerCase()||"delivered"===o.status.toLowerCase(),ee=async()=>{if(Q&&!Z&&confirm("Are you sure you want to cancel this order? This action cannot be undone.")){I(!0);try{let t=localStorage.getItem("customerToken");if(!t)return void alert("Please login to cancel order");let s=await fetch(`${q}/api/orders/${e}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r=await s.json();if(!s.ok)throw Error(r.message||"Failed to cancel order");if(r.success){let s=await fetch(`${q}/api/orders/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){let e=await s.json();e.success&&u(e.data)}alert(r.data.refund?"Order cancelled successfully. Refund has been initiated and will be processed shortly.":r.data.refundError?"Order cancelled. However, refund failed. Please contact support.":"Order cancelled successfully.")}}catch(e){console.error("Error cancelling order:",e),alert(e.message||"Failed to cancel order. Please try again.")}finally{I(!1)}}},et=async()=>{if(!_.trim())return void alert("Please provide a reason for return");U(!0);try{let t=localStorage.getItem("customerToken");if(!t)return void alert("Please login to request return");let s=new FormData;s.append("reason",_.trim()),z.forEach(e=>s.append("attachments",e,e.name));let r=new AbortController,a=window.setTimeout(()=>r.abort(),12e4),i=await fetch(`${q}/api/orders/${e}/return`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s,signal:r.signal}).finally(()=>window.clearTimeout(a)),n=await i.text().catch(()=>""),d=null;try{d=n?JSON.parse(n):null}catch{d=null}if(!i.ok){let e=d?.message||d?.error||(413===i.status?"Upload too large. Please try smaller files (or fewer files) and try again.":n)||`Failed to submit return request (HTTP ${i.status}).`;throw Error(e)}if(d?.success){let s=await fetch(`${q}/api/orders/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){let e=await s.json();e.success&&u(e.data)}E(!1),F(""),M([]),alert("Return request submitted successfully. Our team will review it shortly.")}else throw Error(d?.message||"Unexpected server response. Please try again.")}catch(e){console.error("Error submitting return request:",e),alert(e?.name==="AbortError"?"Upload timed out. Please check your internet connection and try again.":e.message||"Failed to submit return request. Please try again.")}finally{U(!1)}},es=o?.status.toLowerCase()==="delivered",er=o?.returnRequest&&o.returnRequest.type,ea=o?.returnRequest?.type,ei=es?new Date(o?.deliveredAt?o.deliveredAt:o.updatedAt):null,en=ei?new Date(ei.getTime()+2592e5):null,ed=!!es&&!!en&&Date.now()<=en.getTime();en&&en.toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});let el=!!ei&&Date.now()>=ei.getTime()+2592e5;return(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,t.jsx)(a.default,{href:"/dashboard/orders",children:(0,t.jsxs)(n.Button,{variant:"ghost",className:"mb-4 text-xs sm:text-sm",children:[(0,t.jsx)(w.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Orders"]})}),(0,t.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Order Details"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm bg-transparent",disabled:!el,onClick:async()=>{if(el)try{let t=localStorage.getItem("customerToken");if(!t)return void alert("Please login to download invoice");let s=await fetch(`${q}/api/invoices/${e}/download`,{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw Error("Failed to download invoice");let r=await s.blob(),a=window.URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=`Invoice_${o?.invoiceNumber||o?.orderNumber||"invoice"}.pdf`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}catch(e){console.error("Error downloading invoice:",e),alert("Failed to download invoice. Please try again.")}},title:el?"Download Invoice":"Invoice will be available when return period gets over",children:[(0,t.jsx)(N.Download,{className:"mr-2 h-4 w-4"}),"Download Invoice"]}),!el&&es&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center sm:text-left",children:"Invoice will be available when return period gets over"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[(0,t.jsxs)("p",{className:"text-sm sm:text-base text-muted-foreground",children:["Order Number: ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:o.orderNumber})]}),(0,t.jsx)(l.Badge,{className:`${(e=>{switch(e.toLowerCase()){case"delivered":return"bg-green-500";case"picked_up":case"packed up":return"bg-violet-500";case"shipped":return"bg-blue-500";case"processing":return"bg-yellow-500";case"pending":default:return"bg-gray-500";case"cancelled":return"bg-red-500";case"admin_review_required":return"bg-amber-500"}})(K)} w-fit text-xs`,children:V(K)})]}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["Placed on ",Y.toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})," ","at ",Y.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg sm:text-xl",children:"Order Tracking"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"relative space-y-6 sm:space-y-8",children:G.map((e,s)=>{let r=e.isCancelled,a=e.isRejected,i=r||a?"bg-red-500 text-white":e.completed?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground";return(0,t.jsxs)("div",{className:"relative flex gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,t.jsx)("div",{className:`flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-full ${i}`,children:e.completed?r||a?(0,t.jsx)(k.XCircle,{className:"h-4 w-4 sm:h-5 sm:w-5"}):(0,t.jsx)(f.CheckCircle2,{className:"h-4 w-4 sm:h-5 sm:w-5"}):(0,t.jsx)("div",{className:"h-2 w-2 sm:h-3 sm:w-3 rounded-full bg-current"})}),s<G.length-1&&(0,t.jsx)("div",{className:`absolute top-10 h-full w-0.5 ${r||a?"bg-red-500":e.completed?"bg-primary":"bg-muted"}`})]}),(0,t.jsxs)("div",{className:"flex-1 pb-6 sm:pb-8",children:[(0,t.jsx)("p",{className:`font-semibold text-sm sm:text-base ${r||a?"text-red-600 dark:text-red-400":e.completed?"":"text-muted-foreground"}`,children:e.status}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:e.date})]})]},s)})})})]}),o.awbNumber&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-lg sm:text-xl flex items-center gap-2",children:[(0,t.jsx)(y.Truck,{className:"h-5 w-5"}),"Shipment Tracking (DTDC)"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Label,{className:"text-xs text-muted-foreground",children:"AWB Number"}),(0,t.jsx)("p",{className:"text-sm font-medium mt-1",children:o.awbNumber})]}),(0,t.jsx)("a",{href:W(o.awbNumber),target:"_blank",rel:"noopener noreferrer",className:"w-full",children:(0,t.jsxs)(n.Button,{variant:"outline",className:"w-full",children:[(0,t.jsx)(C.ExternalLink,{className:"h-4 w-4 mr-2"}),"Track on DTDC Website"]})})]})})]}),o.returnAwbNumber&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-lg sm:text-xl flex items-center gap-2",children:[(0,t.jsx)(A.RotateCcw,{className:"h-5 w-5"}),"Return Pickup Tracking (DTDC)"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Label,{className:"text-xs text-muted-foreground",children:"Return AWB Number"}),(0,t.jsx)("p",{className:"text-sm font-medium mt-1",children:o.returnAwbNumber})]}),(0,t.jsx)("a",{href:W(o.returnAwbNumber),target:"_blank",rel:"noopener noreferrer",className:"w-full",children:(0,t.jsxs)(n.Button,{variant:"outline",className:"w-full",children:[(0,t.jsx)(C.ExternalLink,{className:"h-4 w-4 mr-2"}),"Track Return on DTDC Website"]})})]})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg sm:text-xl",children:"Order Items"})}),(0,t.jsx)(d.CardContent,{className:"space-y-4",children:o.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-3 sm:gap-4 pb-4 border-b last:border-0 last:pb-0",children:[(0,t.jsx)("div",{className:"relative h-16 w-16 sm:h-20 sm:w-20 flex-shrink-0 overflow-hidden rounded-lg bg-muted",children:e.image||e.productId?.images&&e.productId.images[0]?(0,t.jsx)(i.default,{src:e.image?`${q}${e.image}`:`${q}${e.productId?.images?.[0]}`,alt:e.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)(g.Package,{className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-sm sm:text-base line-clamp-2",children:e.name}),e.brand&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.brand}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:["Quantity: ",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,t.jsxs)("p",{className:"font-semibold text-sm sm:text-base",children:["₹",(e.price*e.quantity).toLocaleString()]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["₹",e.price.toLocaleString()," each"]})]})]},s))})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-4 sm:space-y-6",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg sm:text-xl",children:"Order Summary"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",o.subtotal.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Shipping"}),(0,t.jsx)("span",{className:"font-medium",children:0===o.shipping?"FREE":`₹${o.shipping.toLocaleString()}`})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Payment Method"}),(0,t.jsx)("span",{className:"font-medium uppercase",children:o.paymentMethod})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Payment Status"}),(0,t.jsx)(l.Badge,{variant:"paid"===o.paymentStatus?"default":"secondary",className:"text-xs",children:V(o.paymentStatus)})]}),void 0!==o.cgst||void 0!==o.igst?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{}),o.cgst&&o.sgst?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"CGST (9%)"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",o.cgst.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"SGST (9%)"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",o.sgst.toLocaleString()]})]})]}):o.igst?(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"IGST (18%)"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",o.igst.toLocaleString()]})]}):null]}):null,(0,t.jsx)(h,{}),(0,t.jsxs)("div",{className:"flex justify-between text-base sm:text-lg font-bold",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["₹",o.total.toLocaleString()]})]})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg sm:text-xl",children:"Shipping Address"})}),(0,t.jsx)(d.CardContent,{className:"space-y-3",children:o.shippingAddress&&"object"==typeof o.shippingAddress&&"_id"in o.shippingAddress?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(j.MapPin,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-muted-foreground"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[o.shippingAddress.firstName," ",o.shippingAddress.lastName]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:o.shippingAddress.address1}),o.shippingAddress.address2&&(0,t.jsx)("p",{className:"text-muted-foreground",children:o.shippingAddress.address2}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[o.shippingAddress.city,", ",o.shippingAddress.state," ",o.shippingAddress.postcode]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:o.shippingAddress.country})]})]}),(0,t.jsx)(h,{}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(v.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:o.shippingAddress.phone})]})})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Address details loading..."})})]}),(0,t.jsx)(d.Card,{children:(0,t.jsxs)(d.CardContent,{className:"p-4 space-y-2",children:[Q&&!Z&&(0,t.jsx)(n.Button,{variant:"destructive",className:"w-full text-sm",onClick:ee,disabled:$,children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.XCircle,{className:"mr-2 h-4 w-4"}),"Cancel Order"]})}),Z&&(0,t.jsxs)(R.Alert,{className:"mb-2",children:[(0,t.jsx)(b.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(R.AlertDescription,{className:"text-xs",children:"This order cannot be cancelled as it has been shipped."})]}),(0,t.jsx)(a.default,{href:"/dashboard/support",children:(0,t.jsx)(n.Button,{variant:"outline",className:"w-full text-sm bg-transparent",children:"Contact Support"})}),es&&(0,t.jsx)(t.Fragment,{children:er?(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)(R.Alert,{className:"accepted"===ea?"border-green-500":"denied"===ea?"border-red-500":"border-yellow-500",children:[(0,t.jsx)(b.AlertCircle,{className:"h-4 w-4"}),(0,t.jsxs)(R.AlertDescription,{className:"text-xs",children:[(0,t.jsxs)("div",{className:"font-semibold mb-1",children:["Return Request: ","pending"===ea?"Under Review":"accepted"===ea?"Accepted":"Denied"]}),o.returnRequest?.reason&&(0,t.jsxs)("div",{className:"mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Your reason:"})," ",o.returnRequest.reason]}),o.returnRequest?.adminNotes&&(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Admin response:"})," ",o.returnRequest.adminNotes]}),"accepted"===ea&&o.returnRequest?.refundStatus==="completed"&&(0,t.jsx)("div",{className:"mt-1 text-green-600",children:"Refund has been processed."})]})]})}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(D.Dialog,{open:B,onOpenChange:e=>{E(e),e||(F(""),M([]))},children:[(0,t.jsx)(D.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"outline",className:"w-full text-sm bg-transparent",disabled:!ed,title:ed?"Request a return":"Order cannot be return return window is over",children:[(0,t.jsx)(A.RotateCcw,{className:"mr-2 h-4 w-4"}),"Request Return"]})}),ed&&(0,t.jsxs)(D.DialogContent,{children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsx)(D.DialogTitle,{children:"Request Return"}),(0,t.jsx)(D.DialogDescription,{children:"Please provide a reason for returning this order. Our team will review your request."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Label,{htmlFor:"returnReason",children:"Return Reason *"}),(0,t.jsx)(L.Textarea,{id:"returnReason",placeholder:"Please explain why you want to return this order...",value:_,onChange:e=>F(e.target.value),rows:5,className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Label,{htmlFor:"returnAttachments",children:"Photos / Videos / Documents (optional)"}),(0,t.jsx)(T.Input,{id:"returnAttachments",type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",className:"mt-2",onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>5){alert("You can upload up to 5 files for a return request."),e.target.value="";return}if(t.some(e=>e.size>0x1900000)){alert("Each file must be 25MB or smaller."),e.target.value="";return}M(t)}}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You can add up to 5 files, 25MB each."}),z.length>0&&(0,t.jsx)("ul",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:z.map(e=>(0,t.jsxs)("li",{children:[e.name," (",(e.size/1024/1024).toFixed(1)," MB)"]},`${e.name}-${e.lastModified}`))})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>{E(!1),F(""),M([])},disabled:H,children:"Cancel"}),(0,t.jsx)(n.Button,{onClick:et,disabled:H||!_.trim(),children:H?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Request"})]})]})]})]}),!ed&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Order cannot be return return window is over"})]})})]})})]})]})]})}e.s(["OrderDetailContent",()=>P],97854)}]);
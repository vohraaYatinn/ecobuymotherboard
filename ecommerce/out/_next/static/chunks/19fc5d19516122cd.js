(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var t=e.i(43476),r=e.i(91918),s=e.i(25913),a=e.i(47163);let i=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,asChild:n=!1,...d}){let l=n?r.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,a.cn)(i({variant:s}),e),...d})}e.s(["Badge",()=>n])},84762,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},35804,e=>{"use strict";var t=e.i(71645),r=e.i(34620);function s(e){let[s,a]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,s;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;a({width:r,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),s}e.s(["useSize",()=>s])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function s({className:e,type:s,...a}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>s])},10708,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(48425),a=r.forwardRef((e,r)=>(0,t.jsx)(s.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=e.i(47163);function n({className:e,...r}){return(0,t.jsx)(a,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],10708)},78784,78745,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t],78745),e.s(["CheckIcon",()=>t],78784)},86318,e=>{"use strict";var t=e.i(71645);e.i(43476);var r=t.createContext(void 0);function s(e){let s=t.useContext(r);return e||s||"ltr"}e.s(["useDirection",()=>s])},84614,e=>{"use strict";let t=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},15788,e=>{"use strict";let t=(0,e.i(75254).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},81947,e=>{"use strict";var t=e.i(43476),r=e.i(25913),s=e.i(47163);let a=(0,r.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...i}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(a({variant:r}),e),...i})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...r})}e.s(["Alert",()=>i,"AlertDescription",()=>n])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},48092,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(70065),i=e.i(67881),n=e.i(94179),d=e.i(62870),l=e.i(10708),c=e.i(71689),o=e.i(56909),u=e.i(88844),m=e.i(84614),x=e.i(61659),h=e.i(15788),p=e.i(31278),g=e.i(63209),f=e.i(40160),j=e.i(78917),v=e.i(67240),b=e.i(95468),y=e.i(73884),N=e.i(23750),w=e.i(81947),S=e.i(84762);let C="https://api.elecobuy.com";function A({orderId:e}){var A;let k,R,[$,I]=(0,r.useState)(null),[q,T]=(0,r.useState)(!0),[L,P]=(0,r.useState)(""),[D,F]=(0,r.useState)(!1),[B,z]=(0,r.useState)(""),[O,_]=(0,r.useState)(""),[E,U]=(0,r.useState)([]),[M,H]=(0,r.useState)(""),[V,W]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),[K,X]=(0,r.useState)(""),[Y,Q]=(0,r.useState)(""),[Z,ee]=(0,r.useState)(!1),[et,er]=(0,r.useState)(""),[es,ea]=(0,r.useState)(!1),ei=e=>{if(!e)return"";let t=e/1024/1024;return t>=1?`${t.toFixed(1)} MB`:`${(e/1024).toFixed(0)} KB`},en=e=>e?e.startsWith("http")?e:`${C}${e}`:"";(0,r.useEffect)(()=>{ed(),el()},[e]);let ed=async()=>{try{T(!0),P("");let t=localStorage.getItem("adminToken");if(!t){P("Not authenticated. Please login again."),T(!1);return}let r=await fetch(`${C}/api/admin/orders/${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){let e="Failed to load order";try{e=(await r.json()).message||e}catch{e=r.statusText||`Error ${r.status}`}P(e),T(!1);return}let s=await r.json();if(!s.success){P(s.message||"Failed to load order"),T(!1);return}if(I(s.data),z(s.data.status),H(s.data.awbNumber||""),s.data.vendorId&&"object"==typeof s.data.vendorId&&_(s.data.vendorId._id),s.data.createdAt){let e=new Date(s.data.createdAt),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");Q(`${t}-${r}-${a}T${i}:${n}`)}else Q("");if(s.data.deliveredAt){let e=new Date(s.data.deliveredAt),t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");er(`${t}-${r}-${a}T${i}:${n}`)}else er("")}catch(e){console.error("Error fetching order:",e),P(e instanceof Error?e.message:"Network error. Please check your connection and try again.")}finally{T(!1)}},el=async()=>{try{let e=localStorage.getItem("adminToken");if(!e)return;let t=await fetch(`${C}/api/admin/vendors?status=approved`,{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.success&&U(r.data||[])}catch(e){console.error("Error fetching vendors:",e)}},ec=async()=>{if($)try{F(!0);let t=localStorage.getItem("adminToken");if(!t)return;if(B!==$.status){let r=await fetch(`${C}/api/admin/orders/${e}/status`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({status:B})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to update status")}}let r="object"==typeof $.vendorId&&$.vendorId?$.vendorId._id:$.vendorId;if(O!==r){let r=await fetch(`${C}/api/admin/orders/${e}/assign-vendor`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({vendorId:O||null})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to assign vendor")}}await ed(),alert("Order updated successfully!")}catch(e){console.error("Error saving order:",e),alert("Failed to save changes")}finally{F(!1)}},eo=async()=>{if(!$||!M.trim())return void alert("Please enter a valid AWB number");let t=M.trim().toUpperCase();if(!/^[A-Z]\d{8}$/.test(t))return void alert("Invalid AWB number format. Expected format: 1 alphabet followed by 8 digits (e.g., V01197967)");try{W(!0);let r=localStorage.getItem("adminToken");if(!r)return;let s=await fetch(`${C}/api/dtdc/order/${e}/awb`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({awbNumber:t})});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to update AWB number")}await ed(),alert("AWB number updated successfully!")}catch(e){console.error("Error saving AWB:",e),alert(e instanceof Error?e.message:"Failed to save AWB number")}finally{W(!1)}},eu=async()=>{if(!$||!Y)return void alert("Please select a valid date and time");try{ee(!0);let t=localStorage.getItem("adminToken");if(!t)return void alert("Please login again");let r=await fetch(`${C}/api/admin/orders/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({createdAt:Y})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to update order created date")}await ed(),alert("Order created date updated successfully!")}catch(e){console.error("Error saving createdAt:",e),alert(e instanceof Error?e.message:"Failed to save created date")}finally{ee(!1)}},em=async()=>{if(!$||!et)return void alert("Please select a valid delivered date and time");try{ea(!0);let t=localStorage.getItem("adminToken");if(!t)return void alert("Please login again");let r=await fetch(`${C}/api/admin/orders/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({deliveredAt:et})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to update delivered date")}await ed(),alert("Order delivered date updated successfully!")}catch(e){console.error("Error saving deliveredAt:",e),alert(e instanceof Error?e.message:"Failed to save delivered date")}finally{ea(!1)}},ex=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}),eh=e=>new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),ep=e=>{if(!e)return"bg-gray-100 text-gray-800 border-gray-200";switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"booked":return"bg-blue-100 text-blue-800 border-blue-200";case"in_transit":return"bg-purple-100 text-purple-800 border-purple-200";case"out_for_delivery":return"bg-orange-100 text-orange-800 border-orange-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";case"rto":case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},eg=e=>e?e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Not Set",ef=async()=>{if($){J(!0);try{let t=localStorage.getItem("adminToken");if(!t)return void alert("Please login again");let r=await fetch(`${C}/api/admin/orders/${e}/return/accept`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({adminNotes:K.trim()||void 0})}),s=await r.json();s.success?(X(""),await ed(),alert("Return request accepted successfully")):alert(s.message||"Failed to accept return request")}catch(e){console.error("Error accepting return request:",e),alert("Network error. Please try again.")}finally{J(!1)}}},ej=async()=>{if($){if(!K.trim())return void alert("Please provide a reason for denying the return request");J(!0);try{let t=localStorage.getItem("adminToken");if(!t)return void alert("Please login again");let r=await fetch(`${C}/api/admin/orders/${e}/return/deny`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({adminNotes:K.trim()})}),s=await r.json();s.success?(X(""),await ed(),alert("Return request denied successfully")):alert(s.message||"Failed to deny return request")}catch(e){console.error("Error denying return request:",e),alert("Network error. Please try again.")}finally{J(!1)}}};if(q)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(L||!$)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(s.default,{href:"/admin/orders",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(c.ArrowLeft,{className:"h-5 w-5"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Order Details"})]}),(0,t.jsx)(a.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,t.jsx)(a.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.AlertCircle,{className:"h-5 w-5 text-destructive"}),(0,t.jsx)("p",{className:"text-destructive",children:L||"Order not found"})]})})})]});let ev=$&&"object"==typeof $.customerId&&null!==$.customerId?{name:$.customerId.name||"N/A",mobile:$.customerId.mobile||"N/A",email:$.customerId.email||"N/A"}:{name:"N/A",mobile:"N/A",email:"N/A"},eb=$&&"object"==typeof $.shippingAddress&&null!==$.shippingAddress?$.shippingAddress:null,ey=$&&$.vendorId&&"object"==typeof $.vendorId&&null!==$.vendorId?$.vendorId:null,eN=($.cgst||0)+($.sgst||0)+($.igst||0),ew=($.cgst||0)>0||($.sgst||0)>0,eS=ew?.09*$.shipping:0,eC=ew?.09*$.shipping:0,eA=ew?0:.18*$.shipping,ek=ey?.commission||0,eR=ek/100,e$=$.subtotal*eR,eI=$.subtotal*(1-eR),eq=.02*eI,eT=eI-eq,eL="return_requested"===$.status&&$.returnRequest&&"pending"===$.returnRequest.type;return(0,t.jsxs)("div",{className:"space-y-6",children:[eL&&(0,t.jsxs)(w.Alert,{className:"border-orange-500 bg-orange-50",children:[(0,t.jsx)(v.RotateCcw,{className:"h-5 w-5 text-orange-600"}),(0,t.jsx)(w.AlertDescription,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Return Requested"}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-orange-200",children:[(0,t.jsx)(l.Label,{className:"text-sm font-medium text-muted-foreground",children:"Customer Reason:"}),(0,t.jsx)("p",{className:"mt-1 text-sm",children:$.returnRequest.reason}),$.returnRequest.requestedAt&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Requested on: ",new Date($.returnRequest.requestedAt).toLocaleString("en-IN")]}),$.returnRequest.attachments&&$.returnRequest.attachments.length>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)(l.Label,{className:"text-xs font-medium text-muted-foreground",children:"Customer Uploads:"}),(0,t.jsx)("ul",{className:"mt-1 space-y-1 text-sm",children:$.returnRequest.attachments.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("a",{href:en(e.url),target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:e.originalName||e.url?.split("/").pop()}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(e.mimeType?.split("/")?.[0]||"file").toUpperCase()," ",ei(e.size)]})]},`${e.url}-${r}`))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.Label,{htmlFor:"returnAdminNotes",className:"text-sm font-medium",children:["Admin Notes ","pending"===$.returnRequest.type&&"(Required for rejection)"]}),(0,t.jsx)(S.Textarea,{id:"returnAdminNotes",placeholder:"Add notes about your decision...",value:K,onChange:e=>X(e.target.value),rows:3,className:"mt-2"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)(i.Button,{onClick:ef,disabled:G,className:"flex-1 bg-green-600 hover:bg-green-700",children:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve Return"]})}),(0,t.jsx)(i.Button,{onClick:ej,disabled:G,variant:"destructive",className:"flex-1",children:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.XCircle,{className:"h-4 w-4 mr-2"}),"Reject Return"]})})]})]})})]}),$.returnRequest&&$.returnRequest.type&&"pending"!==$.returnRequest.type&&(0,t.jsxs)(w.Alert,{className:"accepted"===$.returnRequest.type?"border-green-500 bg-green-50":"border-red-500 bg-red-50",children:[(0,t.jsx)(g.AlertCircle,{className:"h-5 w-5"}),(0,t.jsx)(w.AlertDescription,{children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold mb-2",children:["Return ","accepted"===$.returnRequest.type?"Accepted":"Rejected"]}),$.returnRequest.reason&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:"Customer Reason:"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:$.returnRequest.reason})]}),$.returnRequest.attachments&&$.returnRequest.attachments.length>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:"Customer Uploads:"}),(0,t.jsx)("ul",{className:"mt-1 space-y-1 text-sm",children:$.returnRequest.attachments.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("a",{href:en(e.url),target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:e.originalName||e.url?.split("/").pop()}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(e.mimeType?.split("/")?.[0]||"file").toUpperCase()," ",ei(e.size)]})]},`${e.url}-${r}`))})]}),$.returnRequest.adminNotes&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:"Admin Notes:"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:$.returnRequest.adminNotes})]}),$.returnRequest.reviewedAt&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Reviewed on: ",new Date($.returnRequest.reviewedAt).toLocaleString("en-IN")]}),"accepted"===$.returnRequest.type&&$.returnRequest.refundStatus&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:"Refund Status:"}),(0,t.jsx)(n.Badge,{variant:"completed"===$.returnRequest.refundStatus?"default":"secondary",className:"ml-2",children:$.returnRequest.refundStatus})]})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(s.default,{href:"/admin/orders",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(c.ArrowLeft,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:$.orderNumber}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Order placed on ",ex($.createdAt)," at ",eh($.createdAt)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(n.Badge,{className:`${(e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":case"return_picked_up":return"bg-blue-100 text-blue-800";case"processing":return"bg-purple-100 text-purple-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":case"return_accepted":return"bg-green-100 text-green-800";case"cancelled":case"return_rejected":return"bg-red-100 text-red-800";case"return_requested":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})($.status)} w-fit capitalize`,children:$.status.replace(/_/g," ")}),$.awbNumber&&$.dtdcStatus&&(0,t.jsxs)(n.Badge,{className:ep($.dtdcStatus),children:["DTDC: ",eg($.dtdcStatus)]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.User,{className:"h-5 w-5"}),"Customer Information"]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Customer Name"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm font-medium",children:ev.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Contact Number"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm font-medium",children:ev.mobile})]}),"N/A"!==ev.email&&(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Email"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm font-medium",children:ev.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Delivery Address"}),eb?(0,t.jsxs)("p",{className:"mt-1.5 text-sm",children:[eb.firstName," ",eb.lastName,(0,t.jsx)("br",{}),eb.address1,eb.address2&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),eb.address2]}),(0,t.jsx)("br",{}),eb.city,", ",eb.state," - ",eb.postcode,(0,t.jsx)("br",{}),"Phone: ",eb.phone]}):(0,t.jsx)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:"No address available"})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Package,{className:"h-5 w-5"}),"Product Information"]})}),(0,t.jsx)(a.CardContent,{className:"space-y-4",children:$.items.map((e,r)=>{let s=e.productId;return(0,t.jsx)("div",{className:"border-b border-border pb-4 last:border-0 last:pb-0",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[s?.images&&s.images.length>0?(0,t.jsx)("img",{src:s.images[0].startsWith("http")?s.images[0]:`${C}${s.images[0]}`,alt:e.name,className:"h-16 w-16 rounded-lg object-cover bg-muted"}):(0,t.jsx)("div",{className:"h-16 w-16 rounded-lg bg-muted flex items-center justify-center",children:(0,t.jsx)(u.Package,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),s?.brand&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Brand: ",s.brand]}),s?.sku&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["SKU: ",s.sku]}),(0,t.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,t.jsxs)("span",{className:"text-sm",children:["Qty: ",e.quantity]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:["₹",e.price.toLocaleString("en-IN")]})]})]})]})},r)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CreditCard,{className:"h-5 w-5"}),"Payment Information"]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Payment Method"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm font-medium capitalize",children:"cod"===$.paymentMethod?"Cash on Delivery":$.paymentMethod})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Payment Status"}),(0,t.jsx)(n.Badge,{className:`mt-1.5 capitalize ${"paid"===$.paymentStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:$.paymentStatus})]}),$.refundStatus&&(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Refund Status"}),(0,t.jsxs)("div",{className:"mt-1.5 space-y-1",children:[(0,t.jsx)(n.Badge,{className:(e=>{if(!e)return"bg-gray-100 text-gray-800 border-gray-200";switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"processing":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})($.refundStatus),children:(A=$.refundStatus)?A.charAt(0).toUpperCase()+A.slice(1):"N/A"}),$.refundTransactionId&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Transaction ID: ",$.refundTransactionId]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,t.jsxs)("span",{children:["₹",$.subtotal.toLocaleString("en-IN")]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Shipping"}),(0,t.jsxs)("span",{children:["₹",$.shipping.toLocaleString("en-IN")]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Shipping GST ",ew?"(CGST + SGST @ 9%)":"(IGST @ 18%)"]}),(0,t.jsxs)("span",{children:["₹",ew?(eS+eC).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):eA.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"GST on Order"}),(0,t.jsxs)("span",{children:["₹",eN.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{className:"text-green-600",children:["₹",$.total.toLocaleString("en-IN")]})]})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CreditCard,{className:"h-5 w-5"}),"Vendor Payout"]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Product Total"}),(0,t.jsxs)("span",{children:["₹",$.subtotal.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:["Platform Commission (",ek,"%)"]}),(0,t.jsxs)("span",{children:["- ₹",e$.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-medium pt-1",children:[(0,t.jsx)("span",{children:"Payout before Gateway"}),(0,t.jsxs)("span",{children:["₹",eI.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Payment Gateway Charges (~2% of payout before gateway)"}),(0,t.jsxs)("span",{children:["- ₹",eq.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-base pt-2 border-t",children:[(0,t.jsx)("span",{children:"Net Payout to Vendor"}),(0,t.jsxs)("span",{children:["₹",eT.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Truck,{className:"h-5 w-5"}),"Shipping Information"]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"assignedSeller",children:"Assigned Vendor"}),(0,t.jsxs)(d.Select,{value:O,onValueChange:_,children:[(0,t.jsx)(d.SelectTrigger,{id:"assignedSeller",className:"mt-1.5",children:(0,t.jsx)(d.SelectValue,{placeholder:"Select vendor"})}),(0,t.jsx)(d.SelectContent,{children:E.map(e=>(0,t.jsx)(d.SelectItem,{value:e._id,children:e.name},e._id))})]}),ey&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently: ",ey.name,ey.address&&` (${ey.address.city}, ${ey.address.state})`]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"orderStatus",children:"Order Status"}),(0,t.jsxs)(d.Select,{value:B,onValueChange:z,children:[(0,t.jsx)(d.SelectTrigger,{id:"orderStatus",className:"mt-1.5",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(d.SelectItem,{value:"confirmed",children:"Confirmed"}),(0,t.jsx)(d.SelectItem,{value:"processing",children:"Processing"}),(0,t.jsx)(d.SelectItem,{value:"shipped",children:"Shipped"}),(0,t.jsx)(d.SelectItem,{value:"delivered",children:"Delivered"}),(0,t.jsx)(d.SelectItem,{value:"cancelled",children:"Cancelled"}),(0,t.jsx)(d.SelectItem,{value:"return_requested",children:"Return Requested"}),(0,t.jsx)(d.SelectItem,{value:"return_accepted",children:"Return Accepted"}),(0,t.jsx)(d.SelectItem,{value:"return_rejected",children:"Return Rejected"}),(0,t.jsx)(d.SelectItem,{value:"return_picked_up",children:"Return Picked Up"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"awbNumber",children:"AWB Number (DTDC)"}),(0,t.jsxs)("div",{className:"mt-1.5 flex gap-2",children:[(0,t.jsx)(N.Input,{id:"awbNumber",placeholder:"e.g., V01197967",value:M,onChange:e=>H(e.target.value.toUpperCase()),maxLength:9,className:"flex-1"}),(0,t.jsx)(i.Button,{onClick:eo,disabled:V||!M.trim(),size:"sm",children:V?(0,t.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}):"Save"})]}),$.awbNumber&&(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Current: ",$.awbNumber]}),$.dtdcStatus&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Label,{className:"text-xs",children:"DTDC Status:"}),(0,t.jsx)(n.Badge,{className:ep($.dtdcStatus),children:eg($.dtdcStatus)})]}),(0,t.jsx)("a",{href:(k=$.awbNumber,`https://www.dtdc.com/track-your-shipment/?awb=${encodeURIComponent(k)}`),target:"_blank",rel:"noopener noreferrer",className:"w-full",children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(j.ExternalLink,{className:"mr-2 h-4 w-4"}),"Track on DTDC Website"]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"createdAt",children:"Order Created At"}),(0,t.jsxs)("div",{className:"mt-1.5 flex gap-2",children:[(0,t.jsx)(N.Input,{id:"createdAt",type:"datetime-local",value:Y,onChange:e=>Q(e.target.value),className:"flex-1"}),(0,t.jsx)(i.Button,{onClick:eu,disabled:Z||!Y,size:"sm",children:Z?(0,t.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}):"Save"})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Current: ",ex($.createdAt)," at ",eh($.createdAt)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"deliveredAt",children:"Delivered At"}),(0,t.jsxs)("div",{className:"mt-1.5 flex gap-2",children:[(0,t.jsx)(N.Input,{id:"deliveredAt",type:"datetime-local",value:et,onChange:e=>er(e.target.value),className:"flex-1"}),(0,t.jsx)(i.Button,{onClick:em,disabled:es||!et,size:"sm",children:es?(0,t.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}):"Save"})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Current:"," ",$.deliveredAt?`${ex($.deliveredAt)} at ${eh($.deliveredAt)}`:"Not marked as delivered"]})]})]})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Order Timeline"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"relative space-y-6 sm:space-y-8",children:(R=(e=>{let t=[],r=e.status.toLowerCase();if("cancelled"===r)return t.push({status:"Order Placed",date:`${ex(e.createdAt)} at ${eh(e.createdAt)}`,completed:!0}),t.push({status:"Cancelled",date:`${ex(e.updatedAt)} at ${eh(e.updatedAt)}`,completed:!0,isCancelled:!0}),t;if(e.returnRequest&&e.returnRequest.type){let s=e.returnRequest.type,a="accepted"===s||"return_accepted"===r,i="denied"===s||"return_rejected"===r,n="return_picked_up"===r,d="completed"===e.refundStatus||"completed"===e.returnRequest.refundStatus||"refunded"===e.paymentStatus,l=["pending","confirmed","processing","shipped","delivered"],c=l.indexOf("delivered");return l.forEach((r,s)=>{let a="Completed";0===s?a=`${ex(e.createdAt)} at ${eh(e.createdAt)}`:s===c&&e.deliveredAt&&(a=`${ex(e.deliveredAt)} at ${eh(e.deliveredAt)}`),t.push({status:"pending"===r?"Order Placed":"confirmed"===r?"Order Confirmed":"processing"===r?"Processing":"shipped"===r?"Shipped":"Delivered",date:a,completed:!0})}),t.push({status:"Return Requested",date:e.returnRequest.requestedAt?`${ex(e.returnRequest.requestedAt)} at ${eh(e.returnRequest.requestedAt)}`:"Pending",completed:!0}),a?(t.push({status:"Return Accepted",date:e.returnRequest.reviewedAt?`${ex(e.returnRequest.reviewedAt)} at ${eh(e.returnRequest.reviewedAt)}`:"Pending",completed:!0}),n?(t.push({status:"Picked Up",date:`${ex(e.updatedAt)} at ${eh(e.updatedAt)}`,completed:!0}),d?t.push({status:"Refunded Successfully",date:"Completed",completed:!0}):t.push({status:"Refund Pending",date:"In progress",completed:!1})):t.push({status:"Return Pickup Pending",date:"Pending",completed:!1})):i?t.push({status:"Return Rejected",date:e.returnRequest.reviewedAt?`${ex(e.returnRequest.reviewedAt)} at ${eh(e.returnRequest.reviewedAt)}`:"Pending",completed:!0,isRejected:!0}):t.push({status:"Return Under Review",date:"Pending",completed:!1}),t}let s=["pending","confirmed","processing","shipped","delivered"],a=s.indexOf(r);return s.forEach((s,i)=>{let n=i<=a,d="";d=n?"pending"===s?`${ex(e.createdAt)} at ${eh(e.createdAt)}`:"delivered"===s&&"delivered"===r&&e.deliveredAt?`${ex(e.deliveredAt)} at ${eh(e.deliveredAt)}`:i===a?"In progress":"Completed":"Pending",t.push({status:"pending"===s?"Order Placed":"confirmed"===s?"Order Confirmed":"processing"===s?"Processing":"shipped"===s?"Shipped":"Delivered",date:d,completed:n})}),t})($)).map((e,r)=>{let s=e.isCancelled,a=e.isRejected,i=s||a?"bg-red-500 text-white":e.completed?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground";return(0,t.jsxs)("div",{className:"relative flex gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,t.jsx)("div",{className:`flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-full ${i}`,children:e.completed?s||a?(0,t.jsx)(y.XCircle,{className:"h-4 w-4 sm:h-5 sm:w-5"}):(0,t.jsx)(b.CheckCircle2,{className:"h-4 w-4 sm:h-5 sm:w-5"}):(0,t.jsx)("div",{className:"h-2 w-2 sm:h-3 sm:w-3 rounded-full bg-current"})}),r<R.length-1&&(0,t.jsx)("div",{className:`absolute top-10 h-full w-0.5 ${s||a?"bg-red-500":e.completed?"bg-primary":"bg-muted"}`})]}),(0,t.jsxs)("div",{className:"flex-1 pb-6 sm:pb-8",children:[(0,t.jsx)("p",{className:`font-semibold text-sm sm:text-base ${s||a?"text-red-600 dark:text-red-400":e.completed?"":"text-muted-foreground"}`,children:e.status}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:e.date})]})]},r)})})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:async()=>{try{let t=localStorage.getItem("adminToken");if(!t)return void alert("Please login to download invoice");let r=await fetch(`${C}/api/invoices/${e}/download/admin`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to download invoice");let s=await r.blob(),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`Invoice_${$?.invoiceNumber||$?.orderNumber||"invoice"}.pdf`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}catch(e){console.error("Error downloading invoice:",e),alert("Failed to download invoice. Please try again.")}},children:[(0,t.jsx)(f.Download,{className:"h-4 w-4 mr-2"}),"Download Invoice"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s.default,{href:"/admin/orders",children:(0,t.jsx)(i.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(i.Button,{className:"gap-2",onClick:ec,disabled:D,children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Save,{className:"h-4 w-4"}),"Save Changes"]})})]})]})]})}e.s(["AdminOrderDetail",()=>A])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function d({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>d])},69638,e=>{"use strict";let s=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],69638)},83086,e=>{"use strict";let s=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>s],83086)},11596,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(57688),d=e.i(22016),i=e.i(67881),l=e.i(70065),n=e.i(94179),c=e.i(69638),o=e.i(88844),m=e.i(46897),x=e.i(31278),u=e.i(83086);let h="http://192.168.1.43:5000";function p({orderId:e}){let p=(0,a.useRouter)();(0,a.useSearchParams)();let[f,j]=(0,t.useState)(null),[g,N]=(0,t.useState)(!0),[y,b]=(0,t.useState)(""),[v,w]=(0,t.useState)(!0),[C,S]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{if(!e||24!==e.length||!/^[0-9a-fA-F]{24}$/.test(e)){b("Invalid order ID format"),N(!1),w(!1);return}let s=localStorage.getItem("customerToken");if(!s)return void p.push("/login");let t=await fetch(`${h}/api/orders/${e}`,{headers:{Authorization:`Bearer ${s}`}}),a=await t.json();if(!t.ok)throw console.error("Order fetch error:",{status:t.status,statusText:t.statusText,data:a}),Error(a.message||`HTTP error! status: ${t.status}`);a.success&&a.data?(console.log("Order fetched successfully:",a.data),j(a.data),"paid"===a.data.paymentStatus?setTimeout(()=>w(!1),3e3):w(!1)):(console.error("Order fetch failed:",a),b(a.message||"Failed to load order details"),w(!1))}catch(e){console.error("Error fetching order:",e),b(e.message||"Network error. Please try again."),w(!1)}finally{N(!1)}})()},[e,p]);let k=async()=>{try{S(!0);let s=localStorage.getItem("customerToken");if(!s)return void p.push("/login");let t=await fetch(`${h}/api/orders/razorpay/status/${e}`,{headers:{Authorization:`Bearer ${s}`}}),a=await t.json();a.success&&a.data?.order?(j(a.data.order),"paid"===a.data.order.paymentStatus&&w(!1)):b(a.message||"Unable to verify payment status.")}catch(e){console.error("Error verifying payment status:",e),b("Payment verification failed. Please contact support with your transaction ID.")}finally{S(!1)}};if((0,t.useEffect)(()=>{!f||"paid"===f.paymentStatus||C||k()},[f?.paymentStatus,C]),g)return(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})});if(y||!f)return(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"h-20 w-20 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.CheckCircle,{className:"h-10 w-10 text-destructive"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Order Not Found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-2",children:y||"The order you're looking for doesn't exist."}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-8",children:["Order ID: ",e]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsx)(d.default,{href:"/",children:(0,s.jsx)(i.Button,{children:"Go to Home"})}),(0,s.jsx)(d.default,{href:"/dashboard/orders",children:(0,s.jsx)(i.Button,{variant:"outline",children:"View My Orders"})})]})]})});let A="paid"===f.paymentStatus;return(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[!A&&(0,s.jsx)("div",{className:"mb-6 rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"failed"===f.paymentStatus?"Your payment could not be confirmed. If amount is debited, please contact support with the transaction ID below.":C?"Verifying payment with Razorpay. This may take a few seconds...":"Payment is pending. If you completed payment, please wait while we confirm with Razorpay."}),(0,s.jsxs)("div",{className:"text-center mb-8 relative",children:[v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 animate-in zoom-in-95 duration-300",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"h-24 w-24 rounded-full bg-green-100 flex items-center justify-center animate-in zoom-in-95 duration-500",children:(0,s.jsx)(c.CheckCircle,{className:"h-16 w-16 text-green-600 animate-in zoom-in-95 duration-700"})}),(0,s.jsx)(u.Sparkles,{className:"h-6 w-6 text-yellow-400 absolute -top-2 -right-2 animate-pulse"}),(0,s.jsx)(u.Sparkles,{className:"h-5 w-5 text-yellow-400 absolute -bottom-1 -left-1 animate-pulse delay-300"}),(0,s.jsx)(u.Sparkles,{className:"h-4 w-4 text-yellow-400 absolute top-1/2 -left-3 animate-pulse delay-700"})]}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 animate-in fade-in-0 slide-in-from-bottom-4 duration-700",children:"Order Confirmed!"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-1000",children:"Your order has been placed successfully"}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-primary h-full animate-progress",style:{animation:"progress 3s linear forwards"}})})]})})}),(0,s.jsxs)("div",{className:`transition-opacity duration-500 ${v?"opacity-0":"opacity-100"}`,children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"h-20 w-20 rounded-full bg-green-100 flex items-center justify-center animate-in zoom-in-95 duration-500",children:(0,s.jsx)(c.CheckCircle,{className:"h-12 w-12 text-green-600"})})}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:A?"Payment Confirmed!":"Order Created"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:A?"Thank you for your purchase. We've received your order.":"We have your order. Please complete/confirm the PhonePe payment to proceed."})]})]}),(0,s.jsx)(l.Card,{className:"mb-6",children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Order Number"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f.orderNumber})]}),(0,s.jsx)(n.Badge,{variant:"outline",className:"text-lg px-4 py-2",children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Order Date"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(f.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Payment Method"}),(0,s.jsx)("p",{className:"font-medium uppercase",children:f.paymentMethod})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Payment Status"}),(0,s.jsx)("p",{className:"font-medium uppercase",children:f.paymentStatus}),f.paymentTransactionId&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground break-all",children:["Txn ID: ",f.paymentTransactionId]})]})]})]})}),(0,s.jsx)(l.Card,{className:"mb-6",children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(o.Package,{className:"h-5 w-5"}),"Order Items"]}),(0,s.jsx)("div",{className:"space-y-4",children:f.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-4 pb-4 border-b last:border-0 last:pb-0",children:[(0,s.jsx)("div",{className:"relative h-20 w-20 shrink-0 overflow-hidden rounded-lg bg-muted",children:(0,s.jsx)(r.default,{src:e.image?`${h}${e.image}`:"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.brand}),(0,s.jsx)("p",{className:"font-medium mb-1",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",e.quantity]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-semibold",children:["₹",e.price*e.quantity]})})]},t))})]})}),(0,s.jsx)(l.Card,{className:"mb-6",children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)(m.MapPin,{className:"h-5 w-5"}),"Delivery Address"]}),(0,s.jsx)("div",{className:"space-y-1",children:f.shippingAddress&&"object"==typeof f.shippingAddress&&"_id"in f.shippingAddress?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"font-medium",children:[f.shippingAddress.firstName," ",f.shippingAddress.lastName]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:f.shippingAddress.phone}),(0,s.jsxs)("p",{className:"text-sm",children:[f.shippingAddress.address1,f.shippingAddress.address2&&`, ${f.shippingAddress.address2}`]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[f.shippingAddress.city,", ",f.shippingAddress.state," ",f.shippingAddress.postcode]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:f.shippingAddress.country})]}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Address details loading..."})})]})}),(0,s.jsx)(l.Card,{className:"mb-6",children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-semibold",children:["₹",f.subtotal.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Shipping"}),(0,s.jsx)("span",{className:"font-semibold",children:0===f.shipping?"FREE":`₹${f.shipping}`})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-primary",children:["₹",f.total.toLocaleString()]})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(d.default,{href:"/",className:"flex-1",children:(0,s.jsx)(i.Button,{variant:"outline",className:"w-full",children:"Continue Shopping"})}),(0,s.jsx)(d.default,{href:"/dashboard/orders",className:"flex-1",children:(0,s.jsx)(i.Button,{className:"w-full",children:"View My Orders"})})]})]})})}e.s(["OrderConfirmationContent",()=>p])}]);